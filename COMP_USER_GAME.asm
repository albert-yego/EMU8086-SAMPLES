ORG 100H

.data
NUMBERS	DB 00111111b, 00000110b, 01011011b, 01001111b, 01100110b, 01101101b, 01111101b, 00000111b, 01111111b, 01101111b
TEXT1 DB "Enter a number between 0-9: $" 
INPUT DB ? 
RANDOM DB ?    
next DB 0AH,0DH,"$"        
MESS1 DB 'YOU WIN:'
MESS2 DB 'TOTAL GUESS:'
WIN DB ?
TOTAL DB ?

.code 
MOV AX, @data
MOV DS, AX
MOV ES, AX
LEA DI, WIN
LEA SI, TOTAL
MOV AL, 0
MOV BL, 0
MOV WIN[1], AL
MOV TOTAL[1],BL

START:
LEA DX, TEXT1 
MOV AH, 9
INT 21H
JMP SEVENDISPLAY 

SEVENDISPLAY:
MOV DX, 2030h
MOV AL, 00111110b
OUT DX, AL
MOV DX, 2031h
MOV AL, 01000000b
OUT DX, AL
MOV DX, 2032h
CALL USER
MOV DX, 2035h
MOV AL, 00111001b
OUT DX, AL
MOV DX, 2036h
MOV AL, 01000000b
OUT DX, AL
CALL COMP 
JMP ASCII 

ASCII:
MOV AL, INPUT[1]
MOV CL, RANDOM[1]
CMP AL, CL
JE WINNER 
JMP LINE1

LINE1:
MOV DX, 2040h
MOV SI, 0
MOV CX, 8
L1:
MOV AL, MESS1[SI]
OUT DX, AL
INC SI
INC DX
LOOP L1 
JMP W 

W:
MOV DX, 2048h
MOV AL, WIN[1]
CALL LARGE
OUT DX,AL
JMP LINE2

WINNER:
MOV AL, WIN[1]
INC AL
MOV WIN[1], AL 
JMP LINE1

LINE2:
MOV DX, 2050h
MOV SI, 0
MOV CX, 12
L2:
MOV AL, MESS2[SI]
OUT DX, AL
INC SI
INC DX
LOOP L2 
JMP G 

G:
MOV DX, 205Ch
MOV AL, TOTAL[1]
INC AL
MOV TOTAL[1],AL
CALL LARGE
OUT DX,AL
JMP NEXTLINE
RET

USER PROC
LEA DI,INPUT
MOV AH, 01h
INT 21H 
CMP AL, '0'
JB NEXTLINE
CMP AL, '9'
JA NEXTLINE
SUB AL, '0'
MOV INPUT[1], AL
MOV BL, AL
MOV CX, 8 
MOV AL, NUMBERS[BX] 
OUT DX, AL
RET
USER ENDP

COMP PROC
LEA DI, RANDOM
MOV AH, 00h          
INT 1AH      
MOV AX, DX
XOR DX, DX
MOV CX, 10
DIV CX 
MOV RANDOM[1], DL
MOV BL, DL 
MOV DX, 2037h
MOV CX, 8 
MOV AL, NUMBERS[BX] 
OUT DX, AL
RET
COMP ENDP

NEXTLINE:
MOV DX, 10
MOV AH, 2
INT 21H
MOV DX, 13
MOV AH, 2
INT 21H
JMP START

LARGE PROC
MOV AL, 0
MOV AH, 1
LARGE ENDP

GOBACK:
RET
